@using Acerva.Modelo
@using Acerva.Web.Extensions
@{
    ViewBag.Title = "Associados";
    ViewBag.AngularApp = "acerva.usuario";
    var action = ViewContext.RouteData.GetRequiredString("action");
    var id = ViewContext.RouteData.Values["id"];
}
<h4>Associados</h4>

<div ng-view ng-cloak></div>
@Html.AntiForgeryToken()

<script type="text/ng-template" id="index.html">
    <div class="animate-show-only">
        @Html.Partial("_ListaUsuarios")
    </div>
</script>

<script type="text/ng-template" id="edit.html">
    <div class="animate-show-only">
        @Html.Partial("_CadastroUsuario")
    </div>
</script>

@section styles {
    @Styles.Render("~/cssBundles/angularForm")
    @Styles.Render(BundleConfig.BundleStylesDataTables)
}

@section dependencies {
    @if (ViewBag.Id == null)
    {
        @Scripts.Render("~/bundles/user")
    }
}

@section scripts {
    @if (action == "Index")
    {
        <script type="text/javascript">
    (function () {
        angular.module("acerva")
            .constant("ROTAS", {
                buscaTodos: "@Url.Action("BuscaParaListagem")",
                buscaTiposDominio: "@Url.Action("BuscaTiposDominio")",
                busca: "@Url.Action("Busca")",
                salva: "@Url.Action("Salva")",
                alteraStatus: "@Url.Action("AlteraStatus")"
            })
            .constant("ENUMS", @Html.GeraJsonDeEnums(typeof (StatusUsuario)));
        })();
        </script>
    }
    else
    {
        var url = Url.Action("Index") + "#/" + action + "/" + id;
        <script type="text/javascript">
            (function () {
                window.location = '@url';
            })();
        </script>
    }
}
